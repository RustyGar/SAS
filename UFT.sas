***** FORAGE TRIALS 2021 *****;
/**** ANALYSIS OF VARIANCE AND LSMEANS ACROSS LOCATIONS IN 2021 ****;

DATA DATAFOR2021;
LENGTH LOC $ 10; LENGTH ORIGNAME $ 35; LENGTH ENAME $ 35; LENGTH SPECIES $ 30;
INFILE 'C:\' FIRSTOBS=3;
INPUT YEAR LOC $ REP PLOT ENTRY ORIGNAME $ ENAME $ SPECIES $ DM1 DM2 DM3 DM4 TOTDM NSORT;
IF YEAR<2021 THEN DELETE;
PROC SORT; BY YEAR LOC REP ENAME;
/*PROC PRINT DATA=DATAFOR2021;
VAR YEAR LOC REP PLOT ENTRY ORIGNAME ENAME SPECIES DM1 DM2 DM3 DM4 TOTDM NSORT;
RUN;
PROC UNIVARIATE DATA=DATAFOR2021 NORMAL PLOT; BY LOC;
VAR DM1 DM2 DM3 DM4 TOTDM;
RUN;

** ANALYSES AMONG ENTRIES AT EACH LOCATION IN 2021**;

PROC GLM DATA=DATAFOR2021; 
CLASS REP ENAME;
MODEL DM1 DM2 DM3 TOTDM=REP ENAME/SS3; BY LOC;
MEANS ENAME/LSD LINES;
LSMEANS ENAME/OUT=MEANSFOR2021;
PROC PRINT DATA=MEANSFOR2021;
TITLE FORAGES ENTRY ANOVA PER LOCATION;
RUN;

** ANALYSES AMONG SPECIES AT EACH LOCATION IN 2021**;

PROC GLM DATA=DATAFOR2021; BY LOC;
CLASS LOC REP SPECIES;
MODEL DM1 DM2 DM3 TOTDM=REP SPECIES/SS3;
MEANS SPECIES/LSD LINES;
LSMEANS SPECIES/OUT=MEANSFORSP2021;
PROC PRINT DATA=MEANSFORSP2021;
TITLE FORAGES SPECIES ANOVA PER LOCATION;
RUN;*/



***** FORAGE TRIALS 2021 *****;
**** COMBINED ANALYSES WITHIN A LOCATION ACROSS YEARS ****;

DATA DATAFOR2021;
LENGTH LOC $ 10; LENGTH ORIGNAME $ 35; LENGTH ENAME $ 35; LENGTH SPECIES $ 30;
INFILE 'C:\USERS\F.GUILLENPORTAL\EXTENSION PROGRAM\ENTRYDATASETS\MASTERDATAUFT.PRN' FIRSTOBS=3;
INPUT YEAR LOC $ REP PLOT ENTRY ORIGNAME $ ENAME $ SPECIES $ DM1 DM2 DM3 DM4 TOTDM NSORT;
IF YEAR<2017 THEN DELETE;
PROC SORT; BY YEAR LOC REP ENAME;
/*PROC PRINT DATA=DATAFOR2021;
VAR YEAR LOC REP PLOT ENTRY ORIGNAME ENAME SPECIES DM1 DM2 DM3 DM4 TOTDM NSORT;
RUN;
PROC UNIVARIATE DATA=DATAFOR2021 NORMAL PLOT; BY LOC;
VAR DM1 DM2 DM3 DM4 TOTDM;
RUN;*/

************************;
************************;

** COMBINED ANALYSES WITHIN A LOCATION ACROSS YEARS - COLLEGE STATION (CS) **; 
DATA COMBFCS21;
SET DATAFOR2021;
IF LOC="CS" THEN OUTPUT COMBFCS21;
PROC SORT; BY YEAR ENAME;
/*PROC PRINT DATA=COMBFCS21;
RUN;*/

*********************;
*FORCS2YR;
DATA FORCS212YR;
SET COMBFCS21;
WHERE YEAR IN(2021,2020);
RUN;
/*PROC PRINT DATA=FORCS212YR;
RUN;*/
PROC FREQ DATA=FORCS212YR NOPRINT;
TABLES ENAME*YEAR / NOROW NOCOL NOPERCENT OUT=FORCS2YR;
RUN;
PROC FREQ DATA=FORCS2YR NOPRINT;
TABLE ENAME/OUT=FORCS2YRA(WHERE=(COUNT>1));
RUN;
/*PROC PRINT;
RUN;*/
PROC SORT DATA=FORCS212YR; BY ENAME;
RUN;
DATA FORCS212YRB; PERIOD=2;
MERGE FORCS212YR FORCS2YRA(IN=KEEP); BY ENAME;
IF KEEP; DROP COUNT PERCENT;
RUN;
/*PROC PRINT DATA=FORCS212YRB;
RUN;*/

***************;
*FORCS3YR;
DATA FORCS213YR;
SET COMBFCS21;
WHERE YEAR IN(2021,2020,2019);
RUN;
/*PROC PRINT DATA=FORCS213YR;
RUN;*/
PROC FREQ DATA=FORCS213YR NOPRINT;
TABLES ENAME*YEAR / NOROW NOCOL NOPERCENT OUT=FORCS3YR;
RUN;
PROC FREQ DATA=FORCS3YR NOPRINT;
TABLE ENAME/OUT=FORCS3YRA(WHERE=(COUNT=3));
RUN;
/*PROC PRINT;
RUN;*/
PROC SORT DATA=FORCS213YR; BY ENAME;
RUN;
DATA FORCS213YRB; PERIOD=3;
MERGE FORCS213YR FORCS3YRA(IN=KEEP); BY ENAME;
IF KEEP; DROP COUNT PERCENT;
RUN;
/*PROC PRINT DATA=FORCS213YRB;
RUN;*/

***************;
*FORCS4YR;
DATA FORCS214YR;
SET COMBFCS21;
WHERE YEAR IN(2021,2020,2019,2017);
RUN;
/*PROC PRINT DATA=FORCS214YR;
RUN;*/
PROC FREQ DATA=FORCS214YR NOPRINT;
TABLES ENAME*YEAR / NOROW NOCOL NOPERCENT OUT=FORCS4YR;
RUN;
PROC FREQ DATA=FORCS4YR NOPRINT;
TABLE ENAME/OUT=FORCS4YRA(WHERE=(COUNT=4));
RUN;
/*PROC PRINT;
RUN;*/
PROC SORT DATA=FORCS214YR; BY ENAME;
RUN;
DATA FORCS214YRB; PERIOD=4;
MERGE FORCS214YR FORCS4YRA(IN=KEEP); BY ENAME;
IF KEEP; DROP COUNT PERCENT;
RUN;
/*PROC PRINT DATA=FORCS214YRB;
RUN;*/

DATA COMBFORCS21;
MERGE FORCS212YRB FORCS213YRB FORCS214YRB; BY PERIOD;
RUN;
/*PROC PRINT DATA=COMBFORCS21;
RUN;*/

DATA COMBFORCS21A;
SET COMBFORCS21;
PROC SORT; BY PERIOD YEAR REP ENAME; 
PROC GLM DATA=COMBFORCS21A; BY PERIOD;
CLASS YEAR REP ENAME;
MODEL TOTDM=YEAR REP(YEAR) ENAME YEAR*ENAME/SS3;
MEANS ENAME/LSD LINES;
LSMEANS ENAME/OUT=FORCS21YEARS;
PROC PRINT DATA=FORCS21YEARS;
RUN;

DATA FORCS;
LENGTH ENAME $ 35; 
INPUT PERIOD ENAME $ YIELD;
CARDS;
1	Bates_RS4	5274
1	DH12SRW057-006	3671
1	Elbon	3908
1	F5_92	5940
1	FL_0720	5447
1	MW_76-2	4135
1	NF_101	4599
1	NF_00108	4759
1	NF_201	6139
1	NF_95319B	4919
1	NF_97117	5371
1	NF_97226	6006
1	NF_97325	5095
1	NF_99362	5270
1	ON1366277	4424
1	ON13P016	4354
1	TAMO_412	3392
1	TAMO_606	4119
1	Trical_Exp_114	5991
1	Trical_Exp_Oat	4244
1	Trical_Flex_719	4271
1	Trical_131	5237
1	Trical_344	5251
1	Trical_813	5306
1	Trical_Exp_735	5413
1	Trical_Exp-621	6444
1	Trical_Rye	5128
1	Trical_Surge	5853
1	TX14A001035	3113
1	TX14A001249	3536
1	TX14M7061	4628
1	TX14OCS5212	3776
1	TX14V70214	3981
1	TX14VT70526	4905
1	TX15M8024	3741
1	TX15OCS6142	4479
1	TX15OCS6163	4309
1	TX16M9216	3646
1	TX16OCS7015	2957
1	TX16OCS7048	3740
1	TX16OCS7077	4242
1	TX16OCS7093	4419
1	TX16OCS7100	5353
1	Valor	3836
2	Elbon	4123
2	FL_0720	5837
2	NF_00108	4721
2	NF_101	4549
2	NF_201	5164
2	NF_95319B	5039
2	NF_97117	5057
2	NF_97226	6271
2	NF_97325	4903
2	NF_99362	5089
2	ON1366277	4158
2	ON13P016	4486
2	TAMO_412	3991
2	TAMO_606	5008
2	Trical_813	4981
2	Trical_Surge	5699
2	TX14A001035	3545
2	TX14M7061	4932
2	TX14OCS5212	4351
2	TX14V70214	4027
2	TX15M8024	4097
2	TX15OCS6142	4389
2	TX15OCS6163	4770
2	TX16OCS7100	4908
2	Valor	4651
3	Elbon	4252
3	FL_0720	5636
3	NF_101	4578
3	NF_201	4971
3	NF_95319B	4793
3	NF_97117	4994
3	NF_97226	5650
3	NF_97325	4766
3	NF_99362	5111
3	ON13P016	4809
3	TAMO_412	4427
3	TAMO_606	4926
4	FL_0720	4638
4	NF_201	4271
4	TAMO_606	4327
;
/*PROC PRINT DATA=FORCS;
RUN;*/
PROC SORT DATA=FORCS;
BY ENAME;
RUN;
PROC TRANSPOSE DATA=FORCS OUT=FORCSO;
BY ENAME;
VAR YIELD; ID PERIOD;
RUN;
PROC PRINT DATA=FORCSO;
RUN;*/

**********************;
**********************;

** COMBINED ANALYSES WITHIN A LOCATION ACROSS YEARS - COMANCHE (COM) - **; 
DATA COMBFCOM21;
SET DATAFOR2021;
IF LOC="COM" THEN OUTPUT COMBFCOM21;
PROC SORT; BY YEAR ENAME;
/*PROC PRINT DATA=COMBFCOM21;
RUN;*/

*********************;
*FORCOM2YR;
DATA FORCOM212YR;
SET COMBFCOM21;
WHERE YEAR IN(2021,2020);
RUN;
/*PROC PRINT DATA=FORCOM212YR;
RUN;*/
PROC FREQ DATA=FORCOM212YR NOPRINT;
TABLES ENAME*YEAR / NOROW NOCOL NOPERCENT OUT=FORCOM2YR;
RUN;
PROC FREQ DATA=FORCOM2YR NOPRINT;
TABLE ENAME/OUT=FORCOM2YRA(WHERE=(COUNT>1));
RUN;
/*PROC PRINT;
RUN;*/
PROC SORT DATA=FORCOM212YR; BY ENAME;
RUN;
DATA FORCOM212YRB; PERIOD=2;
MERGE FORCOM212YR FORCOM2YRA(IN=KEEP); BY ENAME;
IF KEEP; DROP COUNT PERCENT;
RUN;
/*PROC PRINT DATA=FORCOM212YRB;
RUN;*/

***************;
*PRO3YR;
DATA FORCOM213YR;
SET COMBFCOM21;
WHERE YEAR IN(2021,2020,2019);
RUN;
/*PROC PRINT DATA=FORCOM213YR;
RUN;*/
PROC FREQ DATA=FORCOM213YR NOPRINT;
TABLES ENAME*YEAR / NOROW NOCOL NOPERCENT OUT=FORCOM3YR;
RUN;
PROC FREQ DATA=FORCOM3YR NOPRINT;
TABLE ENAME/OUT=FORCOM3YRA(WHERE=(COUNT=3));
RUN;
/*PROC PRINT;
RUN;*/
PROC SORT DATA=FORCOM213YR; BY ENAME;
RUN;
DATA FORCOM213YRB; PERIOD=3;
MERGE FORCOM213YR FORCOM3YRA(IN=KEEP); BY ENAME;
IF KEEP; DROP COUNT PERCENT;
RUN;
/*PROC PRINT DATA=FORCOM213YRB;
RUN;*/

***************;
*PRO4YR;
DATA FORCOM214YR;
SET COMBFCOM21;
WHERE YEAR IN(2021,2020,2019,2018);
RUN;
/*PROC PRINT DATA=FORCOM214YR;
RUN;*/
PROC FREQ DATA=FORCOM214YR NOPRINT;
TABLES ENAME*YEAR / NOROW NOCOL NOPERCENT OUT=FORCOM4YR;
RUN;
PROC FREQ DATA=FORCOM4YR NOPRINT;
TABLE ENAME/OUT=FORCOM4YRA(WHERE=(COUNT=4));
RUN;
/*PROC PRINT;
RUN;*/
PROC SORT DATA=FORCOM214YR; BY ENAME;
RUN;
DATA FORCOM214YRB; PERIOD=4;
MERGE FORCOM214YR FORCOM4YRA(IN=KEEP); BY ENAME;
IF KEEP; DROP COUNT PERCENT;
RUN;
/*PROC PRINT DATA=FORCOM214YRB;
RUN;*/

DATA COMBFORCOM21;
MERGE FORCOM212YRB FORCOM213YRB FORCOM214YRB; BY PERIOD;
RUN;
/*PROC PRINT DATA=COMBFORCOM21;
RUN;*/

DATA COMBFORCOM21A;
SET COMBFORCOM21;
PROC SORT; BY PERIOD YEAR REP ENAME; 
PROC GLM DATA=COMBFORCOM21A; BY PERIOD;
CLASS YEAR REP ENAME;
MODEL TOTDM=YEAR REP(YEAR) ENAME YEAR*ENAME/SS3;
MEANS ENAME/LSD LINES;
LSMEANS ENAME/OUT=FORCOM21YEARS;
PROC PRINT DATA=FORCOM21YEARS;
RUN;

DATA FORCOM;
LENGTH ENAME $ 35; 
INPUT PERIOD ENAME $ YIELD;
CARDS;
1	Bates_RS4	4634
1	DH12SRW057-006	5877
1	Elbon	7240
1	NF_00108	6335
1	NF_101	5521
1	NF_201	4181
1	NF_95319B	3857
1	NF_97117	6327
1	NF_97226	4359
1	NF_97325	6095
1	NF_99362	3538
1	ON1366277	6965
1	ON13P016	6753
1	SlickTritGrazer	5773
1	TAM_204	5254
1	TAMO_412	4738
1	TAMO_606	4561
1	Trical_131	4163
1	Trical_344	1990
1	Trical_813	5928
1	Trical_Exp_114	7402
1	Trical_Exp_621	5194
1	Trical_Exp_735	4934
1	Trical_Exp_Oat	1503
1	Trical_Flex_719	6010
1	Trical_Rye	3821
1	Trical_Surge	4349
1	TX14V70214	6251
1	TX14VT70526	6767
1	TX15OCS6142	1992
1	TX15OCS6163	3413
1	TX16OCS7015	2209
1	TX16VT68295	4997
1	Valor	9324
2	Elbon	7218.6
2	NF_00108	7052.2
2	NF_101	7220.2
2	NF_201	5940.0
2	NF_95319B	7155.0
2	NF_97117	7300.0
2	NF_97226	6030.8
2	NF_97325	8131.7
2	NF_99362	7157.6
2	ON1366277	7977.9
2	ON13P016	7712.5
2	TAMO_412	6602.3
2	TAMO_606	6596.8
2	Trical_813	8837.4
2	Trical_Surge	7638.1
2	TX14V70214	7678.4
2	TX14VT70526	7420.2
2	TX15OCS6142	5530.0
2	TX15OCS6163	6109.1
2	TX16VT68295	5995.0
2	Valor	9126.2
3	Elbon	7101.0
3	NF_101	7335.7
3	NF_201	6480.0
3	NF_95319B	7241.7
3	NF_97117	7241.4
3	NF_97226	6479.6
3	NF_97325	7895.8
3	NF_99362	7190.2
3	ON13P016	7438.1
3	TAMO_412	6584.1
3	TAMO_606	6651.4
3	TX14VT70526	7578.8
3	TX16VT68295	6332.6
4	NF_95319B	7568.1
4	NF_97117	7441.0
4	NF_97226	7078.0
4	NF_97325	8195.1
4	ON13P016	8006.5
;
/*PROC PRINT DATA=FORCOM;
RUN;*/
PROC SORT DATA=FORCOM;
BY ENAME;
RUN;
PROC TRANSPOSE DATA=FORCOM OUT=FORCOMO;
BY ENAME;
VAR YIELD; ID PERIOD;
RUN;
PROC PRINT DATA=FORCOMO;
RUN;*/

************************;
************************;

** COMBINED ANALYSES WITHIN A LOCATION ACROSS YEARS - COMANCHE COUNTY (COMVAR) - **; 
DATA COMBFCOMVAR21;
SET DATAFOR2021;
IF LOC="COMVAR" THEN OUTPUT COMBFCOMVAR21;
PROC SORT; BY YEAR ENAME;
/*PROC PRINT DATA=COMBFCOMVAR21;
RUN;*/

*********************;
*FORCOMVAR2YR;
DATA FORCOMVAR212YR;
SET COMBFCOMVAR21;
WHERE YEAR IN(2021,2020);
RUN;
/*PROC PRINT DATA=FORCOMVAR212YR;
RUN;*/
PROC FREQ DATA=FORCOMVAR212YR NOPRINT;
TABLES ENAME*YEAR / NOROW NOCOL NOPERCENT OUT=FORCOMVAR2YR;
RUN;
PROC FREQ DATA=FORCOMVAR2YR NOPRINT;
TABLE ENAME/OUT=FORCOMVAR2YRA(WHERE=(COUNT>1));
RUN;
/*PROC PRINT;
RUN;*/
PROC SORT DATA=FORCOMVAR212YR; BY ENAME;
RUN;
DATA FORCOMVAR212YRB; PERIOD=2;
MERGE FORCOMVAR212YR FORCOMVAR2YRA(IN=KEEP); BY ENAME;
IF KEEP; DROP COUNT PERCENT;
RUN;
/*PROC PRINT DATA=FORCOMVAR212YRB;
RUN;*/

***************;
*PRO3YR;
DATA FORCOMVAR213YR;
SET COMBFCOMVAR21;
WHERE YEAR IN(2021,2020,2019);
RUN;
/*PROC PRINT DATA=FORCOMVAR213YR;
RUN;*/
PROC FREQ DATA=FORCOMVAR213YR NOPRINT;
TABLES ENAME*YEAR / NOROW NOCOL NOPERCENT OUT=FORCOMVAR3YR;
RUN;
PROC FREQ DATA=FORCOMVAR3YR NOPRINT;
TABLE ENAME/OUT=FORCOMVAR3YRA(WHERE=(COUNT=3));
RUN;
/*PROC PRINT;
RUN;*/
PROC SORT DATA=FORCOMVAR213YR; BY ENAME;
RUN;
DATA FORCOMVAR213YRB; PERIOD=3;
MERGE FORCOMVAR213YR FORCOMVAR3YRA(IN=KEEP); BY ENAME;
IF KEEP; DROP COUNT PERCENT;
RUN;
/*PROC PRINT DATA=FORCOMVAR213YRB;
RUN;*/

***************;
*PRO4YR;
DATA FORCOMVAR214YR;
SET COMBFCOMVAR21;
WHERE YEAR IN(2021,2020,2019,2018);
RUN;
/*PROC PRINT DATA=FORCOMVAR214YR;
RUN;*/
PROC FREQ DATA=FORCOMVAR214YR NOPRINT;
TABLES ENAME*YEAR / NOROW NOCOL NOPERCENT OUT=FORCOMVAR4YR;
RUN;
PROC FREQ DATA=FORCOMVAR4YR NOPRINT;
TABLE ENAME/OUT=FORCOMVAR4YRA(WHERE=(COUNT=4));
RUN;
/*PROC PRINT;
RUN;*/
PROC SORT DATA=FORCOMVAR214YR; BY ENAME;
RUN;
DATA FORCOMVAR214YRB; PERIOD=4;
MERGE FORCOMVAR214YR FORCOMVAR4YRA(IN=KEEP); BY ENAME;
IF KEEP; DROP COUNT PERCENT;
RUN;
/*PROC PRINT DATA=FORCOMVAR214YRB;
RUN;*/

DATA COMVARBFORCOMVAR21;
MERGE FORCOMVAR212YRB FORCOMVAR213YRB FORCOMVAR214YRB; BY PERIOD;
RUN;
/*PROC PRINT DATA=COMVARBFORCOMVAR21;
RUN;*/

DATA COMVARBFORCOMVAR21A;
SET COMVARBFORCOMVAR21;
PROC SORT; BY PERIOD YEAR REP ENAME; 
PROC GLM DATA=COMVARBFORCOMVAR21A; BY PERIOD;
CLASS YEAR REP ENAME;
MODEL TOTDM=YEAR REP(YEAR) ENAME YEAR*ENAME/SS3;
MEANS ENAME/LSD LINES;
LSMEANS ENAME/OUT=FORCOMVAR21YEARS;
PROC PRINT DATA=FORCOMVAR21YEARS;
RUN;

DATA FORCOMVAR;
LENGTH ENAME $ 35; 
INPUT PERIOD ENAME $ YIELD;
CARDS;
1	2011-F5-135-4	7379.50
1	2011-F5-64-1	7356.23
1	Big_Country	6019.97
1	Elbon	8633.97
1	Florida_501	657.63
1	Green_Hammer	5261.00
1	Heavy_GrazerII	2580.47
1	Marshall	6495.60
1	Nelson	5186.30
1	NF_201	4225.90
1	Oakes	5074.23
1	OK_Corral	8021.17
1	Slicktrit_II	6603.13
1	SY_131	4183.27
1	SY_Razor	5099.13
1	TAM_114	6407.73
1	TAM_204	5861.27
1	TAMO_606	3327.30
1	Walken	1800.00
1	Wintergrazer	10455.67
2	Elbon	7623.53
2	Marshall	6494.62
2	Nelson	5621.65
2	NF_201	5595.65
2	Oakes	6791.40
2	SY_Razor	6094.53
2	TAM_114	8662.74
2	TAM_204	7332.55
2	TAMO_606	5747.75
2	Wintergrazer	9309.82
3	Elbon	6081.80
3	Marshall	5144.50
3	Nelson	4439.97
3	NF_201	4644.88
3	Oakes	5350.47
3	SY_Razor	4675.42
3	TAM_114	6718.18
3	TAM_204	5666.56
3	TAMO_606	4396.10
3	Wintergrazer	7078.29
4	Elbon	6890.00
4	Nelson	5166.07
4	NF_201	5626.96
4	Oakes	6547.07
4	SY_Razor	5785.40
4	TAM_114	7569.79
4	TAM_204	6608.64
;
/*PROC PRINT DATA=FORCOMVAR;
RUN;*/
PROC SORT DATA=FORCOMVAR;
BY ENAME;
RUN;
PROC TRANSPOSE DATA=FORCOMVAR OUT=FORCOMVARO;
BY ENAME;
VAR YIELD; ID PERIOD;
RUN;
PROC PRINT DATA=FORCOMVARO;
RUN;*/

************************;
************************



**************************;
**************************;
** COMBINED ANALYSES WITHIN A LOCATION ACROSS YEARS - BUSHLAND (COM) - **; 
DATA COMBFBUSH21;
SET DATAFOR2021;
IF LOC="BUSH" THEN OUTPUT COMBFBUSH21;
PROC SORT; BY YEAR ENAME;
/*PROC PRINT DATA=COMBFBUSH21;
RUN;*/

*********************;
*FORBUSH2YR;
DATA FORBUSH212YR;
SET COMBFBUSH21;
WHERE YEAR IN(2021,2020);
RUN;
/*PROC PRINT DATA=FORBUSH212YR;
RUN;*/
PROC FREQ DATA=FORBUSH212YR NOPRINT;
TABLES ENAME*YEAR / NOROW NOCOL NOPERCENT OUT=FORBUSH2YR;
RUN;
PROC FREQ DATA=FORBUSH2YR NOPRINT;
TABLE ENAME/OUT=FORBUSH2YRA(WHERE=(COUNT>1));
RUN;
/*PROC PRINT;
RUN;*/
PROC SORT DATA=FORBUSH212YR; BY ENAME;
RUN;
DATA FORBUSH212YRB; PERIOD=2;
MERGE FORBUSH212YR FORBUSH2YRA(IN=KEEP); BY ENAME;
IF KEEP; DROP COUNT PERCENT;
RUN;
/*PROC PRINT DATA=FORBUSH212YRB;
RUN;*/

***************;
*FORBUSH3YR;
DATA FORBUSH213YR;
SET COMBFBUSH21;
WHERE YEAR IN(2021,2020,2019);
RUN;
/*PROC PRINT DATA=FORBUSH213YR;
RUN;*/
PROC FREQ DATA=FORBUSH213YR NOPRINT;
TABLES ENAME*YEAR / NOROW NOCOL NOPERCENT OUT=FORBUSH3YR;
RUN;
PROC FREQ DATA=FORBUSH3YR NOPRINT;
TABLE ENAME/OUT=FORBUSH3YRA(WHERE=(COUNT=3));
RUN;
/*PROC PRINT;
RUN;*/
PROC SORT DATA=FORBUSH213YR; BY ENAME;
RUN;
DATA FORBUSH213YRB; PERIOD=3;
MERGE FORBUSH213YR FORBUSH3YRA(IN=KEEP); BY ENAME;
IF KEEP; DROP COUNT PERCENT;
RUN;
/*PROC PRINT DATA=FORBUSH213YRB;
RUN;*/

***************;
*FORBUSH4YR;
DATA FORBUSH214YR;
SET COMBFBUSH21;
WHERE YEAR IN(2021,2020,2019,2018);
RUN;
/*PROC PRINT DATA=FORBUSH214YR;
RUN;*/
PROC FREQ DATA=FORBUSH214YR NOPRINT;
TABLES ENAME*YEAR / NOROW NOCOL NOPERCENT OUT=FORBUSH4YR;
RUN;
PROC FREQ DATA=FORBUSH4YR NOPRINT;
TABLE ENAME/OUT=FORBUSH4YRA(WHERE=(COUNT=4));
RUN;
/*PROC PRINT;
RUN;*/
PROC SORT DATA=FORBUSH214YR; BY ENAME;
RUN;
DATA FORBUSH214YRB; PERIOD=4;
MERGE FORBUSH214YR FORBUSH4YRA(IN=KEEP); BY ENAME;
IF KEEP; DROP COUNT PERCENT;
RUN;
/*PROC PRINT DATA=FORBUSH214YRB;
RUN;*/

DATA COMBFORBUSH21;
MERGE FORBUSH212YRB FORBUSH213YRB FORBUSH214YRB; BY PERIOD;
RUN;
/*PROC PRINT DATA=COMBFORBUSH21;
RUN;*/

DATA COMBFORBUSH21A;
SET COMBFORBUSH21;
PROC SORT; BY PERIOD YEAR REP ENAME; 
PROC GLM DATA=COMBFORBUSH21A; BY PERIOD;
CLASS YEAR REP ENAME;
MODEL TOTDM=YEAR REP(YEAR) ENAME YEAR*ENAME/SS3;
MEANS ENAME/LSD LINES;
LSMEANS ENAME/OUT=FORBUSH21YEARS;
PROC PRINT DATA=FORBUSH21YEARS;
RUN;

DATA FORBUSH;
LENGTH ENAME $ 35; 
INPUT PERIOD ENAME $ YIELD;
CARDS;
1	TX14VT70526	9205.18
1	TX16VT68295	7620.42
1	TX14A001035	4813.76
1	TX14M7061	5291.45
1	TX14V70214	5035.18
1	TX15M8024	7454.36
1	Trical_813	7124.28
1	Trical_Flex_719	5797.83
1	Trical_Surge	6421.08
1	Trical_Thor	6367.77
1	TAM_115	5709.68
1	Valor	4836.31
1	Trical_Exp_621	7796.73
1	Trical_344	7382.60
1	Trical_Rye	7345.70
1	Trical_Exp_305	7111.98
1	Trical_Exp_114	7075.08
1	Trical_Gunner	6501.03
1	SlickTrit_Grazer	6419.02
1	Trical_Exp_735	6279.62
1	TAM_112	5689.18
1	TX14A001249	5492.36
1	TX16M9216	5279.14
1	AP15T_22413	5061.82
1	TAM_204	5061.82
1	AP_EverRock	4709.20
1	Slicktrit_II	4651.80
1	AP_Roadrunner	4174.11
1	Trical_Exp_Oat	3829.69
2	Slicktrit_II	4155.75
2	TAM_115	5137.30
2	Trical_813	6065.74
2	Trical_Flex_719	5936.35
2	Trical_Surge	5758.38
2	Trical_Thor	5652.50
2	TX14A001035	4868.30
2	TX14M7061	5212.06
2	TX14V70214	4984.15
2	TX14VT70526	7415.79
2	TX15M8024	6258.54
2	TX16VT68295	6660.44
2	Valor	5065.75
3	Slicktrit_II	6332.48
3	TAM_115	6113.53
3	TX14A001035	6474.66
3	TX14M7061	6163.36
3	TX14V70214	6129.80
3	TX14VT70526	7936.20
3	TX16VT68295	7600.78
4	Slicktrit_II	9810.04
4	TAM_115	10869.84
;
/*PROC PRINT DATA=FORBUSH;
RUN;*/
PROC SORT DATA=FORBUSH;
BY ENAME;
RUN;
PROC TRANSPOSE DATA=FORBUSH OUT=FORBUSHO;
BY ENAME;
VAR YIELD; ID PERIOD;
RUN;
PROC PRINT DATA=FORBUSHO;
RUN;*/


*********************;
*********************;

** COMBINED ANALYSES WITHIN A LOCATION ACROSS YEARS - WILBARGER (WIL) **; 
DATA COMBFWIL21;
SET DATAFOR2021;
IF LOC="LOCK" THEN LOC="WIL";
IF LOC="WIL" THEN OUTPUT COMBFWIL21;
PROC SORT; BY YEAR ENAME;
/*PROC PRINT DATA=COMBFWIL21;
RUN;*/

** COMBINED ANALYSES WITHIN A LOCATION ACROSS YEARS - WILBARGER (WIL) - **; 

*FORWIL2YR;
DATA FORWIL212YR;
SET COMBFWIL21;
WHERE YEAR IN(2021,2020);
RUN;
/*PROC PRINT DATA=FORWIL212YR;
RUN;*/
PROC FREQ DATA=FORWIL212YR NOPRINT;
TABLES ENAME*YEAR / NOROW NOCOL NOPERCENT OUT=FORWIL2YR;
RUN;
PROC FREQ DATA=FORWIL2YR NOPRINT;
TABLE ENAME/OUT=FORWIL2YRA(WHERE=(COUNT>1));
RUN;
/*PROC PRINT;
RUN;*/
PROC SORT DATA=FORWIL212YR; BY ENAME;
RUN;
DATA FORWIL212YRB; PERIOD=2;
MERGE FORWIL212YR FORWIL2YRA(IN=KEEP); BY ENAME;
IF KEEP; DROP COUNT PERCENT;
RUN;
/*PROC PRINT DATA=FORWIL212YRB;
RUN;*/

***************;
*FORWIL3YR;
DATA FORWIL213YR;
SET COMBFWIL21;
WHERE YEAR IN(2021,2020,2019);
RUN;
/*PROC PRINT DATA=FORWIL213YR;
RUN;*/
PROC FREQ DATA=FORWIL213YR NOPRINT;
TABLES ENAME*YEAR / NOROW NOCOL NOPERCENT OUT=FORWIL3YR;
RUN;
PROC FREQ DATA=FORWIL3YR NOPRINT;
TABLE ENAME/OUT=FORWIL3YRA(WHERE=(COUNT=3));
RUN;
/*PROC PRINT;
RUN;*/
PROC SORT DATA=FORWIL213YR; BY ENAME;
RUN;
DATA FORWIL213YRB; PERIOD=3;
MERGE FORWIL213YR FORWIL3YRA(IN=KEEP); BY ENAME;
IF KEEP; DROP COUNT PERCENT;
RUN;
/*PROC PRINT DATA=FORWIL213YRB;
RUN;*/

***************;
*FORWIL4YR;
DATA FORWIL214YR;
SET COMBFWIL21;
WHERE YEAR IN(2021,2020,2019,2018);
RUN;
/*PROC PRINT DATA=FORWIL214YR;
RUN;*/
PROC FREQ DATA=FORWIL214YR NOPRINT;
TABLES ENAME*YEAR / NOROW NOCOL NOPERCENT OUT=FORWIL4YR;
RUN;
PROC FREQ DATA=FORWIL4YR NOPRINT;
TABLE ENAME/OUT=FORWIL4YRA(WHERE=(COUNT=4));
RUN;
/*PROC PRINT;
RUN;*/
PROC SORT DATA=FORWIL214YR; BY ENAME;
RUN;
DATA FORWIL214YRB; PERIOD=4;
MERGE FORWIL214YR FORWIL4YRA(IN=KEEP); BY ENAME;
IF KEEP; DROP COUNT PERCENT;
RUN;
/*PROC PRINT DATA=FORWIL214YRB;
RUN;*/

DATA COMBFORWIL21;
MERGE FORWIL212YRB FORWIL213YRB FORWIL214YRB; BY PERIOD;
RUN;
/*PROC PRINT DATA=COMBFORWIL21;
RUN;*/

DATA COMBFORWIL21A;
SET COMBFORWIL21;
PROC SORT; BY PERIOD YEAR REP ENAME; 
PROC GLM DATA=COMBFORWIL21A; BY PERIOD;
CLASS YEAR REP ENAME;
MODEL TOTDM=YEAR REP(YEAR) ENAME YEAR*ENAME/SS3;
MEANS ENAME/LSD LINES;
LSMEANS ENAME/OUT=FORWIL21YEARS;
PROC PRINT DATA=FORWIL21YEARS;
RUN;

DATA FORWIL;
LENGTH ENAME $ 35; 
INPUT PERIOD ENAME $ YIELD;
CARDS;
1	Elbon	2648
1	Gallagher	2427
1	SY_Razor	2705
1	TAM_114	2878
1	TAM_205	2437
1	TAM_Trical_131	2927
1	TAM_Trical_813	2956
1	TAM_Trical_Exp_114	2744
1	TAM_Trical_Exp_621	1994
1	TAMbar_505	2649
1	TAMO_606	2559
1	TX14VT_70526	2929
1	TX16VT_68295	2869
1	Weathermaster	2498
2	Elbon	2687
2	Gallagher	2643
2	SY_Razor	2555
2	TAM_114	3032
2	TAM_205	2472
2	TAMO_606	2599
3	Elbon	3588
3	SY_Razor	3062
3	TAM_114	3679
3	TAMO_606	3125
4	Elbon	3259
4	TAM_114	3159
4	TAMO_606	2718
;
/*PROC PRINT DATA=FORWIL;
RUN;*/
PROC SORT DATA=FORWIL;
BY ENAME;
RUN;
PROC TRANSPOSE DATA=FORWIL OUT=FORWILO;
BY ENAME;
VAR YIELD; ID PERIOD;
RUN;
PROC PRINT DATA=FORWILO;
RUN;*/


*********************;
*********************;

** COMBINED ANALYSES WITHIN A LOCATION ACROSS YEARS - MILLERSVIEW (MILL) **; 
DATA COMBFMILL21;
SET DATAFOR2021;
IF LOC="MILL" THEN OUTPUT COMBFMILL21;
PROC SORT; BY YEAR ENAME;
/*PROC PRINT DATA=COMBFMILL21;
RUN;*/

** COMBINED ANALYSES WITHIN A LOCATION ACROSS YEARS - MILLERSVIEW (MILL) - **; 

*FORMILL2YR;
DATA FORMILL212YR;
SET COMBFMILL21;
WHERE YEAR IN(2021,2020);
RUN;
/*PROC PRINT DATA=FORMILL212YR;
RUN;*/
PROC FREQ DATA=FORMILL212YR NOPRINT;
TABLES ENAME*YEAR / NOROW NOCOL NOPERCENT OUT=FORMILL2YR;
RUN;
PROC FREQ DATA=FORMILL2YR NOPRINT;
TABLE ENAME/OUT=FORMILL2YRA(WHERE=(COUNT>1));
RUN;
/*PROC PRINT;
RUN;*/
PROC SORT DATA=FORMILL212YR; BY ENAME;
RUN;
DATA FORMILL212YRB; PERIOD=2;
MERGE FORMILL212YR FORMILL2YRA(IN=KEEP); BY ENAME;
IF KEEP; DROP COUNT PERCENT;
RUN;
/*PROC PRINT DATA=FORMILL212YRB;
RUN;*/

***************;
*FORMILL3YR;
DATA FORMILL213YR;
SET COMBFMILL21;
WHERE YEAR IN(2021,2020,2019);
RUN;
/*PROC PRINT DATA=FORMILL213YR;
RUN;*/
PROC FREQ DATA=FORMILL213YR NOPRINT;
TABLES ENAME*YEAR / NOROW NOCOL NOPERCENT OUT=FORMILL3YR;
RUN;
PROC FREQ DATA=FORMILL3YR NOPRINT;
TABLE ENAME/OUT=FORMILL3YRA(WHERE=(COUNT=3));
RUN;
/*PROC PRINT;
RUN;*/
PROC SORT DATA=FORMILL213YR; BY ENAME;
RUN;
DATA FORMILL213YRB; PERIOD=3;
MERGE FORMILL213YR FORMILL3YRA(IN=KEEP); BY ENAME;
IF KEEP; DROP COUNT PERCENT;
RUN;
/*PROC PRINT DATA=FORMILL213YRB;
RUN;*/

***************;
*FORMILL4YR;
DATA FORMILL214YR;
SET COMBFMILL21;
WHERE YEAR IN(2021,2020,2019,2018);
RUN;
/*PROC PRINT DATA=FORMILL214YR;
RUN;*/
PROC FREQ DATA=FORMILL214YR NOPRINT;
TABLES ENAME*YEAR / NOROW NOCOL NOPERCENT OUT=FORMILL4YR;
RUN;
PROC FREQ DATA=FORMILL4YR NOPRINT;
TABLE ENAME/OUT=FORMILL4YRA(WHERE=(COUNT=4));
RUN;
/*PROC PRINT;
RUN;*/
PROC SORT DATA=FORMILL214YR; BY ENAME;
RUN;
DATA FORMILL214YRB; PERIOD=4;
MERGE FORMILL214YR FORMILL4YRA(IN=KEEP); BY ENAME;
IF KEEP; DROP COUNT PERCENT;
RUN;
/*PROC PRINT DATA=FORMILL214YRB;
RUN;*/

DATA COMBFORMILL21;
MERGE FORMILL212YRB FORMILL213YRB FORMILL214YRB; BY PERIOD;
RUN;
/*PROC PRINT DATA=COMBFORMILL21;
RUN;*/

DATA COMBFORMILL21A;
SET COMBFORMILL21;
PROC SORT; BY PERIOD YEAR REP ENAME; 
PROC GLM DATA=COMBFORMILL21A; BY PERIOD;
CLASS YEAR REP ENAME;
MODEL TOTDM=YEAR REP(YEAR) ENAME YEAR*ENAME/SS3;
MEANS ENAME/LSD LINES;
LSMEANS ENAME/OUT=FORMILL21YEARS;
PROC PRINT DATA=FORMILL21YEARS;
RUN;

DATA FORMILL;
LENGTH ENAME $ 35; 
INPUT PERIOD ENAME $ YIELD;
CARDS;
1	Elbon	2648
1	Gallagher	2427
1	SY_Razor	2705
1	TAM_114	2878
1	TAM_205	2437
1	TAM_Trical_131	2927
1	TAM_Trical_813	2956
1	TAM_Trical_Exp_114	2744
1	TAM_Trical_Exp_621	1994
1	TAMbar_505	2649
1	TAMO_606	2559
1	TX14VT_70526	2929
1	TX16VT_68295	2869
1	Weathermaster	2498
2	Elbon	2687
2	Gallagher	2643
2	SY_Razor	2555
2	TAM_114	3032
2	TAM_205	2472
2	TAMO_606	2599
3	Elbon	3588
3	SY_Razor	3062
3	TAM_114	3679
3	TAMO_606	3125
4	Elbon	3259
4	TAM_114	3159
4	TAMO_606	2718
;
/*PROC PRINT DATA=FORMILL;
RUN;*/
PROC SORT DATA=FORMILL;
BY ENAME;
RUN;
PROC TRANSPOSE DATA=FORMILL OUT=FORMILLO;
BY ENAME;
VAR YIELD; ID PERIOD;
RUN;
PROC PRINT DATA=FORMILLO;
RUN;*/
